###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.30.6.53336/W32 for ARM     02/Jul/2014  19:13:58 #
# Copyright 1999-2012 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  arm                                                      #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내            #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91lib\peripherals\pit\pit.c                         #
#    Command line =  "C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내           #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91lib\peripherals\pit\pit.c" -D at91sam7se512 -D    #
#                    flash -D TRACE_LEVEL=4 -lC "C:\Users\JDS_Retina\Dropbox\ #
#                    회사\JDS_PRO\국내 프로젝트\대구                          #
#                    모노레일\프로그램\ARM_AT91sam7se512_Dagu_LED\at91sam7se- #
#                    ek\basic-usart-hw-handshaking-project\ewp\at91sam7se512_ #
#                    flash\List\" --remarks --diag_suppress Pe826,Pe1375 -o   #
#                    "C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내           #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91sam7se-ek\basic-usart-hw-handshaking-project\ewp\ #
#                    at91sam7se512_flash\Obj\" --no_cse --no_unroll           #
#                    --no_inline --no_code_motion --no_tbaa --no_clustering   #
#                    --no_scheduling --debug --endian=little --cpu=ARM7TDMI   #
#                    -e --fpu=None --dlib_config "C:\Program Files\IAR        #
#                    Systems\Embedded Workbench 6.0\arm\INC\c\DLib_Config_Ful #
#                    l.h" -I "C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내   #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91sam7se-ek\basic-usart-hw-handshaking-project\ewp\ #
#                    ..\..\..\at91lib/peripherals\" -I                        #
#                    "C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내           #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91sam7se-ek\basic-usart-hw-handshaking-project\ewp\ #
#                    ..\..\..\at91lib/memories\" -I                           #
#                    "C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내           #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91sam7se-ek\basic-usart-hw-handshaking-project\ewp\ #
#                    ..\..\..\at91lib\" -I "C:\Users\JDS_Retina\Dropbox\회사\ #
#                    JDS_PRO\국내 프로젝트\대구 모노레일\프로그램\ARM_AT91sam #
#                    7se512_Dagu_LED\at91sam7se-ek\basic-usart-hw-handshaking #
#                    -project\ewp\..\..\..\at91lib/components\" -I            #
#                    "C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내           #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91sam7se-ek\basic-usart-hw-handshaking-project\ewp\ #
#                    ..\..\..\at91lib/boards/at91sam7se-ek\" --interwork      #
#                    --cpu_mode arm -On --use_c++_inline                      #
#    List file    =  C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내            #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91sam7se-ek\basic-usart-hw-handshaking-project\ewp\ #
#                    at91sam7se512_flash\List\pit.lst                         #
#    Object file  =  C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내            #
#                    프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_L #
#                    ED\at91sam7se-ek\basic-usart-hw-handshaking-project\ewp\ #
#                    at91sam7se512_flash\Obj\pit.o                            #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\JDS_Retina\Dropbox\회사\JDS_PRO\국내 프로젝트\대구 모노레일\프로그램\ARM_AT91sam7se512_Dagu_LED\at91lib\peripherals\pit\pit.c
      1          /* ----------------------------------------------------------------------------
      2           *         ATMEL Microcontroller Software Support 
      3           * ----------------------------------------------------------------------------
      4           * Copyright (c) 2008, Atmel Corporation
      5           *
      6           * All rights reserved.
      7           *
      8           * Redistribution and use in source and binary forms, with or without
      9           * modification, are permitted provided that the following conditions are met:
     10           *
     11           * - Redistributions of source code must retain the above copyright notice,
     12           * this list of conditions and the disclaimer below.
     13           *
     14           * Atmel's name may not be used to endorse or promote products derived from
     15           * this software without specific prior written permission.
     16           *
     17           * DISCLAIMER: THIS SOFTWARE IS PROVIDED BY ATMEL "AS IS" AND ANY EXPRESS OR
     18           * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
     19           * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT ARE
     20           * DISCLAIMED. IN NO EVENT SHALL ATMEL BE LIABLE FOR ANY DIRECT, INDIRECT,
     21           * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
     22           * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
     23           * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
     24           * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     25           * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
     26           * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     27           * ----------------------------------------------------------------------------
     28           */
     29          
     30          //------------------------------------------------------------------------------
     31          //         Headers
     32          //------------------------------------------------------------------------------
     33          
     34          #include "pit.h"
     35          #include <board.h>
     36          
     37          //------------------------------------------------------------------------------
     38          //         Global functions
     39          //------------------------------------------------------------------------------
     40          
     41          //------------------------------------------------------------------------------
     42          /// Initialize the Periodic Interval Timer to generate a tick at the specified
     43          /// period, given the current master clock frequency.
     44          /// \param period  Period in 탎econd.
     45          /// \param pit_frequency  Master clock frequency in MHz.
     46          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
     47          void PIT_Init(unsigned int period, unsigned int pit_frequency)
     48          {
     49              AT91C_BASE_PITC->PITC_PIMR = period? (period * pit_frequency + 8) >> 4 : 0;
   \                     PIT_Init:
   \   00000000   0xE3500000         CMP      R0,#+0
   \   00000004   0x0A000003         BEQ      ??PIT_Init_0
   \   00000008   0xE0120091         MULS     R2,R1,R0
   \   0000000C   0xE2922008         ADDS     R2,R2,#+8
   \   00000010   0xE1B02222         LSRS     R2,R2,#+4
   \   00000014   0xEA000000         B        ??PIT_Init_1
   \                     ??PIT_Init_0:
   \   00000018   0xE3A02000         MOV      R2,#+0
   \                     ??PIT_Init_1:
   \   0000001C   0xE3E030CF         MVN      R3,#+207
   \   00000020   0xE3C33F80         BIC      R3,R3,#0x200
   \   00000024   0xE5832000         STR      R2,[R3, #+0]
     50              AT91C_BASE_PITC->PITC_PIMR |= AT91C_PITC_PITEN;
   \   00000028   0xE3E020CF         MVN      R2,#+207
   \   0000002C   0xE3C22F80         BIC      R2,R2,#0x200
   \   00000030   0xE5922000         LDR      R2,[R2, #+0]
   \   00000034   0xE3922740         ORRS     R2,R2,#0x1000000
   \   00000038   0xE3E030CF         MVN      R3,#+207
   \   0000003C   0xE3C33F80         BIC      R3,R3,#0x200
   \   00000040   0xE5832000         STR      R2,[R3, #+0]
     51          }
   \   00000044   0xE12FFF1E         BX       LR               ;; return
     52          
     53          //------------------------------------------------------------------------------
     54          /// Set the Periodic Interval Value of the PIT.
     55          /// \param piv  PIV value to set.
     56          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
     57          void PIT_SetPIV(unsigned int piv)
     58          {
     59              AT91C_BASE_PITC->PITC_PIMR = (AT91C_BASE_PITC->PITC_PIMR & AT91C_PITC_PIV)
     60                                           | piv;
   \                     PIT_SetPIV:
   \   00000000   0xE3E010CF         MVN      R1,#+207
   \   00000004   0xE3C11F80         BIC      R1,R1,#0x200
   \   00000008   0xE5911000         LDR      R1,[R1, #+0]
   \   0000000C   0xE1B01601         LSLS     R1,R1,#+12
   \   00000010   0xE1901621         ORRS     R1,R0,R1, LSR #+12
   \   00000014   0xE3E020CF         MVN      R2,#+207
   \   00000018   0xE3C22F80         BIC      R2,R2,#0x200
   \   0000001C   0xE5821000         STR      R1,[R2, #+0]
     61          }
   \   00000020   0xE12FFF1E         BX       LR               ;; return
     62          
     63          //------------------------------------------------------------------------------
     64          /// Enables the PIT if this is not already the case.
     65          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
     66          void PIT_Enable(void)
     67          {
     68              AT91C_BASE_PITC->PITC_PIMR |= AT91C_PITC_PITEN;
   \                     PIT_Enable:
   \   00000000   0xE3E000CF         MVN      R0,#+207
   \   00000004   0xE3C00F80         BIC      R0,R0,#0x200
   \   00000008   0xE5900000         LDR      R0,[R0, #+0]
   \   0000000C   0xE3900740         ORRS     R0,R0,#0x1000000
   \   00000010   0xE3E010CF         MVN      R1,#+207
   \   00000014   0xE3C11F80         BIC      R1,R1,#0x200
   \   00000018   0xE5810000         STR      R0,[R1, #+0]
     69          }
   \   0000001C   0xE12FFF1E         BX       LR               ;; return
     70          
     71          //----------------------------------------------------------------------------
     72          /// Enable the PIT periodic interrupt.
     73          //----------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
     74          void PIT_EnableIT(void)
     75          {
     76              AT91C_BASE_PITC->PITC_PIMR |= AT91C_PITC_PITIEN;
   \                     PIT_EnableIT:
   \   00000000   0xE3E000CF         MVN      R0,#+207
   \   00000004   0xE3C00F80         BIC      R0,R0,#0x200
   \   00000008   0xE5900000         LDR      R0,[R0, #+0]
   \   0000000C   0xE3900780         ORRS     R0,R0,#0x2000000
   \   00000010   0xE3E010CF         MVN      R1,#+207
   \   00000014   0xE3C11F80         BIC      R1,R1,#0x200
   \   00000018   0xE5810000         STR      R0,[R1, #+0]
     77          }
   \   0000001C   0xE12FFF1E         BX       LR               ;; return
     78          
     79          //------------------------------------------------------------------------------
     80          /// Disables the PIT periodic interrupt.
     81          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
     82          void PIT_DisableIT(void)
     83          {
     84              AT91C_BASE_PITC->PITC_PIMR &= ~AT91C_PITC_PITIEN;
                                                   ^
Remark[Pe068]: integer conversion resulted in a change of sign
   \                     PIT_DisableIT:
   \   00000000   0xE3E000CF         MVN      R0,#+207
   \   00000004   0xE3C00F80         BIC      R0,R0,#0x200
   \   00000008   0xE5900000         LDR      R0,[R0, #+0]
   \   0000000C   0xE3D00780         BICS     R0,R0,#0x2000000
   \   00000010   0xE3E010CF         MVN      R1,#+207
   \   00000014   0xE3C11F80         BIC      R1,R1,#0x200
   \   00000018   0xE5810000         STR      R0,[R1, #+0]
     85          }
   \   0000001C   0xE12FFF1E         BX       LR               ;; return
     86          
     87          //------------------------------------------------------------------------------
     88          /// Returns the value of the PIT mode register.
     89          /// \return PIT_MR value.
     90          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
     91          unsigned int PIT_GetMode(void)
     92          {
     93              return AT91C_BASE_PITC->PITC_PIMR;
   \                     PIT_GetMode:
   \   00000000   0xE3E000CF         MVN      R0,#+207
   \   00000004   0xE3C00F80         BIC      R0,R0,#0x200
   \   00000008   0xE5900000         LDR      R0,[R0, #+0]
   \   0000000C   0xE12FFF1E         BX       LR               ;; return
     94          }
     95          
     96          //------------------------------------------------------------------------------
     97          /// Returns the value of the PIT status register, clearing it as a side effect.
     98          /// \return PIT_SR value.
     99          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
    100          unsigned int PIT_GetStatus(void)
    101          {
    102              return AT91C_BASE_PITC->PITC_PISR;
   \                     PIT_GetStatus:
   \   00000000   0xE3E000CB         MVN      R0,#+203
   \   00000004   0xE3C00F80         BIC      R0,R0,#0x200
   \   00000008   0xE5900000         LDR      R0,[R0, #+0]
   \   0000000C   0xE12FFF1E         BX       LR               ;; return
    103          }
    104          
    105          //------------------------------------------------------------------------------
    106          /// Returns the value of the PIT Image Register, to read PICNT and CPIV without
    107          /// clearing the current values.
    108          /// \return PIT_PIIR value.
    109          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
    110          unsigned int PIT_GetPIIR(void)
    111          {
    112              return AT91C_BASE_PITC->PITC_PIIR;
   \                     PIT_GetPIIR:
   \   00000000   0xE3E000C3         MVN      R0,#+195
   \   00000004   0xE3C00F80         BIC      R0,R0,#0x200
   \   00000008   0xE5900000         LDR      R0,[R0, #+0]
   \   0000000C   0xE12FFF1E         BX       LR               ;; return
    113          }
    114          
    115          //------------------------------------------------------------------------------
    116          /// Returns the value of the PIT Value Register, clearing it as a side effect.
    117          /// \return PIT_PIVR value.
    118          //------------------------------------------------------------------------------

   \                                 In section .text, align 4, keep-with-next
    119          unsigned int PIT_GetPIVR(void)
    120          {
    121              return AT91C_BASE_PITC->PITC_PIVR;
   \                     PIT_GetPIVR:
   \   00000000   0xE3E000C7         MVN      R0,#+199
   \   00000004   0xE3C00F80         BIC      R0,R0,#0x200
   \   00000008   0xE5900000         LDR      R0,[R0, #+0]
   \   0000000C   0xE12FFF1E         BX       LR               ;; return
    122          }

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
        0  PIT_DisableIT
        0  PIT_Enable
        0  PIT_EnableIT
        0  PIT_GetMode
        0  PIT_GetPIIR
        0  PIT_GetPIVR
        0  PIT_GetStatus
        0  PIT_Init
        0  PIT_SetPIV


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      32  PIT_DisableIT
      32  PIT_Enable
      32  PIT_EnableIT
      16  PIT_GetMode
      16  PIT_GetPIIR
      16  PIT_GetPIVR
      16  PIT_GetStatus
      72  PIT_Init
      36  PIT_SetPIV

 
 268 bytes in section .text
 
 268 bytes of CODE memory

Errors: none
Warnings: none
