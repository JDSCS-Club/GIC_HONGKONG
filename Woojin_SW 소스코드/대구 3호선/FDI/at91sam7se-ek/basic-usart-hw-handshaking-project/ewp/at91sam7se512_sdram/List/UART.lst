###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.30.6.53336/W32 for ARM     30/Apr/2013  13:12:29 #
# Copyright 1999-2012 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  arm                                                      #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구          #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\UART.c                                               #
#    Command line =  "C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구         #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\UART.c" -D at91sam7se512 -D sdram -D TRACE_LEVEL=4   #
#                    -lC "C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구     #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\ewp\at91sam7se512_sdram\List\" --remarks             #
#                    --diag_suppress Pe826,Pe1375 -o                          #
#                    "C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구         #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\ewp\at91sam7se512_sdram\Obj\" --no_cse --no_unroll   #
#                    --no_inline --no_code_motion --no_tbaa --no_clustering   #
#                    --no_scheduling --debug --endian=little --cpu=ARM7TDMI   #
#                    -e --fpu=None --dlib_config "C:\Program Files\IAR        #
#                    Systems\Embedded Workbench 6.0\arm\INC\c\DLib_Config_Ful #
#                    l.h" -I "C:\Users\JDS\Desktop\JDS_PRO\국내               #
#                    프로젝트\대구 모노레일\프로그램\basic-usart-hw-handshaki #
#                    ng-project-at91sam7se-ek\at91sam7se-ek\basic-usart-hw-ha #
#                    ndshaking-project\ewp\..\..\..\at91lib/peripherals\" -I  #
#                    "C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구         #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\ewp\..\..\..\at91lib\" -I                            #
#                    "C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구         #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\ewp\..\..\..\at91lib/components\" -I                 #
#                    "C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구         #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\ewp\..\..\..\at91lib/boards/at91sam7se-ek\"          #
#                    --interwork --cpu_mode arm -Oh --use_c++_inline          #
#    List file    =  C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구          #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\ewp\at91sam7se512_sdram\List\UART.lst                #
#    Object file  =  C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구          #
#                    모노레일\프로그램\basic-usart-hw-handshaking-project-at9 #
#                    1sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-proj #
#                    ect\ewp\at91sam7se512_sdram\Obj\UART.o                   #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구 모노레일\프로그램\basic-usart-hw-handshaking-project-at91sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-project\UART.c
      1          
      2          #include <stdio.h>
      3          #include "UART.h"

  #endif
        ^
"C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구 모노레일\프로그램\basic-usart-hw-handshaking-project-at91sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-project\main.h",27  Remark[Pe001]: 
          last line of file ends without a newline

  #endif
        ^
"C:\Users\JDS\Desktop\JDS_PRO\국내 프로젝트\대구 모노레일\프로그램\basic-usart-hw-handshaking-project-at91sam7se-ek\at91sam7se-ek\basic-usart-hw-handshaking-project\UART.h",16  Remark[Pe001]: 
          last line of file ends without a newline
      4          #include "main.h"
      5          
      6          
      7          #define SCC_RX_TIMEOUT_MAX 10
      8          
      9          

   \                                 In section .data, align 4
     10          unsigned int CRC_Table[] = {
   \                     CRC_Table:
   \   00000000   0x00000000         DC32 0, 13918, 27836, 23266, 55672, 61222, 46532, 33690, 65417, 51671
   \              0x0000365E   
   \              0x00006CBC   
   \              0x00005AE2   
   \              0x0000D978   
   \              0x0000EF26   
   \              0x0000B5C4   
   \              0x0000839A   
   \              0x0000FF89   
   \              0x0000C9D7   
   \   00000028   0x00009335         DC32 37685, 42347, 9969, 4271, 19021, 31763, 45675, 33845, 57047, 59529
   \              0x0000A56B   
   \              0x000026F1   
   \              0x000010AF   
   \              0x00004A4D   
   \              0x00007C13   
   \              0x0000B26B   
   \              0x00008435   
   \              0x0000DED7   
   \              0x0000E889   
   \   00000050   0x00006B13         DC32 27411, 23885, 1967, 12785, 19938, 31676, 8542, 5888, 38042, 41668
   \              0x00005D4D   
   \              0x000007AF   
   \              0x000031F1   
   \              0x00004DE2   
   \              0x00007BBC   
   \              0x0000215E   
   \              0x00001700   
   \              0x0000949A   
   \              0x0000A2C4   
   \   00000078   0x0000F826         DC32 63526, 52856, 10671, 8177, 17683, 29517, 61655, 50825, 40043
   \              0x0000CE78   
   \              0x000029AF   
   \              0x00001FF1   
   \              0x00004513   
   \              0x0000734D   
   \              0x0000F0D7   
   \              0x0000C689   
   \              0x00009C6B   
   \   0000009C   0x0000AA35         DC32 43573, 54822, 57464, 47770, 36036, 3934, 14592, 25570, 21948
   \              0x0000D626   
   \              0x0000E078   
   \              0x0000BA9A   
   \              0x00008CC4   
   \              0x00000F5E   
   \              0x00003900   
   \              0x000063E2   
   \              0x000055BC   
   \   000000C0   0x00009BC4         DC32 39876, 44442, 63352, 49446, 17084, 29922, 11776, 6238, 25677
   \              0x0000AD9A   
   \              0x0000F778   
   \              0x0000C126   
   \              0x000042BC   
   \              0x000074E2   
   \              0x00002E00   
   \              0x0000185E   
   \              0x0000644D   
   \   000000E4   0x00005213         DC32 21011, 2289, 16047, 48437, 35691, 53641, 59351, 21342, 25856
   \              0x000008F1   
   \              0x00003EAF   
   \              0x0000BD35   
   \              0x00008B6B   
   \              0x0000D189   
   \              0x0000E7D7   
   \              0x0000535E   
   \              0x00006500   
   \   00000108   0x00003FE2         DC32 16354, 2492, 35366, 48248, 59034, 53444, 44247, 39561, 49259
   \              0x000009BC   
   \              0x00008A26   
   \              0x0000BC78   
   \              0x0000E69A   
   \              0x0000D0C4   
   \              0x0000ACD7   
   \              0x00009A89   
   \              0x0000C06B   
   \   0000012C   0x0000F635         DC32 63029, 30127, 17393, 6419, 12109, 57653, 55147, 36233, 48087
   \              0x000075AF   
   \              0x000043F1   
   \              0x00001913   
   \              0x00002F4D   
   \              0x0000E135   
   \              0x0000D76B   
   \              0x00008D89   
   \              0x0000BBD7   
   \   00000150   0x0000384D         DC32 14413, 3603, 21745, 25263, 7868, 10466, 29184, 17502, 51140, 61850
   \              0x00000E13   
   \              0x000054F1   
   \              0x000062AF   
   \              0x00001EBC   
   \              0x000028E2   
   \              0x00007200   
   \              0x0000445E   
   \              0x0000C7C4   
   \              0x0000F19A   
   \   00000178   0x0000AB78         DC32 43896, 40230, 31473, 19631, 5709, 8211, 41865, 38359, 53045, 63851
   \              0x00009D26   
   \              0x00007AF1   
   \              0x00004CAF   
   \              0x0000164D   
   \              0x00002013   
   \              0x0000A389   
   \              0x000095D7   
   \              0x0000CF35   
   \              0x0000F96B   
   \   000001A0   0x00008578         DC32 34168, 45862, 59844, 57242, 23552, 27230, 12476, 1762, 51354
   \              0x0000B326   
   \              0x0000E9C4   
   \              0x0000DF9A   
   \              0x00005C00   
   \              0x00006A5E   
   \              0x000030BC   
   \              0x000006E2   
   \              0x0000C89A   
   \   000001C4   0x0000FEC4         DC32 65220, 42022, 37496, 4578, 10172, 32094, 19200, 14099, 333, 23471
   \              0x0000A426   
   \              0x00009278   
   \              0x000011E2   
   \              0x000027BC   
   \              0x00007D5E   
   \              0x00004B00   
   \              0x00003713   
   \              0x0000014D   
   \              0x00005BAF   
   \   000001EC   0x00006DF1         DC32 28145, 61035, 55349, 33495, 46217, 42684, 37090, 51712, 64606
   \              0x0000EE6B   
   \              0x0000D835   
   \              0x000082D7   
   \              0x0000B489   
   \              0x0000A6BC   
   \              0x000090E2   
   \              0x0000CA00   
   \              0x0000FC5E   
   \   00000210   0x00007FC4         DC32 32708, 18842, 4984, 9510, 22837, 28523, 13705, 983, 32845, 46611
   \              0x0000499A   
   \              0x00001378   
   \              0x00002526   
   \              0x00005935   
   \              0x00006F6B   
   \              0x00003589   
   \              0x000003D7   
   \              0x0000804D   
   \              0x0000B613   
   \   00000238   0x0000ECF1         DC32 60657, 55983, 5335, 8841, 30827, 20021, 52655, 64497, 41235, 38733
   \              0x0000DAAF   
   \              0x000014D7   
   \              0x00002289   
   \              0x0000786B   
   \              0x00004E35   
   \              0x0000CDAF   
   \              0x0000FBF1   
   \              0x0000A113   
   \              0x0000974D   
   \   00000260   0x0000EB5E         DC32 60254, 56576, 34786, 45500, 12838, 1144, 24218, 26820, 36627
   \              0x0000DD00   
   \              0x000087E2   
   \              0x0000B1BC   
   \              0x00003226   
   \              0x00000478   
   \              0x00005E9A   
   \              0x000068C4   
   \              0x00008F13   
   \   00000284   0x0000B94D         DC32 47437, 58287, 54769, 22123, 24629, 15063, 3209, 28826, 18116, 7206
   \              0x0000E3AF   
   \              0x0000D5F1   
   \              0x0000566B   
   \              0x00006035   
   \              0x00003AD7   
   \              0x00000C89   
   \              0x0000709A   
   \              0x000046C4   
   \              0x00001C26   
   \   000002AC   0x00002A78         DC32 10872, 43490, 40892, 50526, 62208, 15736, 2854, 20932, 26522
   \              0x0000A9E2   
   \              0x00009FBC   
   \              0x0000C55E   
   \              0x0000F300   
   \              0x00003D78   
   \              0x00000B26   
   \              0x000051C4   
   \              0x0000679A   
   \   000002D0   0x0000E400         DC32 58368, 53854, 35004, 48866, 49905, 62639, 44621, 38931, 7049
   \              0x0000D25E   
   \              0x000088BC   
   \              0x0000BEE2   
   \              0x0000C2F1   
   \              0x0000F4AF   
   \              0x0000AE4D   
   \              0x00009813   
   \              0x00001B89   
   \   000002F4   0x00002DD7         DC32 11735, 30517, 16747, 62946, 50108, 39262, 44800, 11418, 6852
   \              0x00007735   
   \              0x0000416B   
   \              0x0000F5E2   
   \              0x0000C3BC   
   \              0x0000995E   
   \              0x0000AF00   
   \              0x00002C9A   
   \              0x00001AC4   
   \   00000318   0x00004026         DC32 16422, 30328, 2667, 15413, 26327, 20617, 54035, 58701, 49071
   \              0x00007678   
   \              0x00000A6B   
   \              0x00003C35   
   \              0x000066D7   
   \              0x00005089   
   \              0x0000D313   
   \              0x0000E54D   
   \              0x0000BFAF   
   \   0000033C   0x000089F1         DC32 35313, 18313, 29143, 11061, 7531, 40689, 43183, 62029, 50195
   \              0x00004789   
   \              0x000071D7   
   \              0x00002B35   
   \              0x00001D6B   
   \              0x00009EF1   
   \              0x0000A8AF   
   \              0x0000F24D   
   \              0x0000C413   
   \   00000360   0x0000B800         DC32 47104, 36446, 54460, 58082, 24952, 22310, 3524, 15258, 56397
   \              0x00008E5E   
   \              0x0000D4BC   
   \              0x0000E2E2   
   \              0x00006178   
   \              0x00005726   
   \              0x00000DC4   
   \              0x00003B9A   
   \              0x0000DC4D   
   \   00000384   0x0000EA13         DC32 59923, 45297, 34479, 1333, 13163, 27017, 24535, 9156, 5530, 20344
   \              0x0000B0F1   
   \              0x000086AF   
   \              0x00000535   
   \              0x0000336B   
   \              0x00006989   
   \              0x00005FD7   
   \              0x000023C4   
   \              0x0000159A   
   \              0x00004F78   
   \   000003AC   0x00007926         DC32 31014, 64188, 52450, 38400, 41054, 28198, 22648, 666, 13508, 46942
   \              0x0000FABC   
   \              0x0000CCE2   
   \              0x00009600   
   \              0x0000A05E   
   \              0x00006E26   
   \              0x00005878   
   \              0x0000029A   
   \              0x000034C4   
   \              0x0000B75E   
   \   000003D4   0x00008100         DC32 33024, 56290, 60860, 37295, 42993, 64787, 52045, 18647, 32393
   \              0x0000DBE2   
   \              0x0000EDBC   
   \              0x000091AF   
   \              0x0000A7F1   
   \              0x0000FD13   
   \              0x0000CB4D   
   \              0x000048D7   
   \              0x00007E89   
   \   000003F8   0x0000246B         DC32 9323, 4661
   \              0x00001235   
     11           0x0000,  0x365e,  0x6cbc,  0x5ae2,  0xd978,  0xef26,  0xb5c4,	0x839a,
     12           0xff89,  0xc9d7,  0x9335,  0xa56b,  0x26f1,  0x10af,  0x4a4d,	0x7c13,
     13           0xb26b,  0x8435,  0xded7,  0xe889,  0x6b13,  0x5d4d,  0x07af,	0x31f1,
     14           0x4de2,  0x7bbc,  0x215e,  0x1700,  0x949a,  0xa2c4,  0xf826,	0xce78,
     15           0x29af,  0x1ff1,  0x4513,  0x734d,  0xf0d7,  0xc689,  0x9c6b,	0xaa35,
     16           0xd626,  0xe078,  0xba9a,  0x8cc4,  0x0f5e,  0x3900,  0x63e2,	0x55bc,
     17           0x9bc4,  0xad9a,  0xf778,  0xc126,  0x42bc,  0x74e2,  0x2e00,	0x185e,
     18           0x644d,  0x5213,  0x08f1,  0x3eaf,  0xbd35,  0x8b6b,  0xd189,	0xe7d7,
     19           0x535e,  0x6500,  0x3fe2,  0x09bc,  0x8a26,  0xbc78,  0xe69a,	0xd0c4,
     20           0xacd7,  0x9a89,  0xc06b,  0xf635,  0x75af,  0x43f1,  0x1913,	0x2f4d,
     21           0xe135,  0xd76b,  0x8d89,  0xbbd7,  0x384d,  0x0e13,  0x54f1,	0x62af,
     22           0x1ebc,  0x28e2,  0x7200,  0x445e,  0xc7c4,  0xf19a,  0xab78,	0x9d26,
     23           0x7af1,  0x4caf,  0x164d,  0x2013,  0xa389,  0x95d7,  0xcf35,	0xf96b,
     24           0x8578,  0xb326,  0xe9c4,  0xdf9a,  0x5c00,  0x6a5e,  0x30bc,	0x06e2,
     25           0xc89a,  0xfec4,  0xa426,  0x9278,  0x11e2,  0x27bc,  0x7d5e,	0x4b00,
     26           0x3713,  0x014d,  0x5baf,  0x6df1,  0xee6b,  0xd835,  0x82d7,	0xb489,
     27           0xa6bc,  0x90e2,  0xca00,  0xfc5e,  0x7fc4,  0x499a,  0x1378,	0x2526,
     28           0x5935,  0x6f6b,  0x3589,  0x03d7,  0x804d,  0xb613,  0xecf1,	0xdaaf,
     29           0x14d7,  0x2289,  0x786b,  0x4e35,  0xcdaf,  0xfbf1,  0xa113,	0x974d,
     30           0xeb5e,  0xdd00,  0x87e2,  0xb1bc,  0x3226,  0x0478,  0x5e9a,	0x68c4,
     31           0x8f13,  0xb94d,  0xe3af,  0xd5f1,  0x566b,  0x6035,  0x3ad7,	0x0c89,
     32           0x709a,  0x46c4,  0x1c26,  0x2a78,  0xa9e2,  0x9fbc,  0xc55e,	0xf300,
     33           0x3d78,  0x0b26,  0x51c4,  0x679a,  0xe400,  0xd25e,  0x88bc,	0xbee2,
     34           0xc2f1,  0xf4af,  0xae4d,  0x9813,  0x1b89,  0x2dd7,  0x7735,	0x416b,
     35           0xf5e2,  0xc3bc,  0x995e,  0xaf00,  0x2c9a,  0x1ac4,  0x4026,	0x7678,
     36           0x0a6b,  0x3c35,  0x66d7,  0x5089,  0xd313,  0xe54d,  0xbfaf,	0x89f1,
     37           0x4789,  0x71d7,  0x2b35,  0x1d6b,  0x9ef1,  0xa8af,  0xf24d,	0xc413,
     38           0xb800,  0x8e5e,  0xd4bc,  0xe2e2,  0x6178,  0x5726,  0x0dc4,	0x3b9a,
     39           0xdc4d,  0xea13,  0xb0f1,  0x86af,  0x0535,  0x336b,  0x6989,	0x5fd7,
     40           0x23c4,  0x159a,  0x4f78,  0x7926,  0xfabc,  0xcce2,  0x9600,	0xa05e,
     41           0x6e26,  0x5878,  0x029a,  0x34c4,  0xb75e,  0x8100,  0xdbe2,	0xedbc,
     42           0x91af,  0xa7f1,  0xfd13,  0xcb4d,  0x48d7,  0x7e89,  0x246b,	0x1235
     43          };
     44          
     45          //통신 수신 부분.

   \                                 In section .bss, align 4
     46          UINT SCC_RxBufCnt = 0;
   \                     SCC_RxBufCnt:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     47          UCHAR SCC_RxBuf[500];
   \                     SCC_RxBuf:
   \   00000000                      DS8 500

   \                                 In section .bss, align 4
     48          UCHAR SCC_RxBuf_BackUP[500];
   \                     SCC_RxBuf_BackUP:
   \   00000000                      DS8 500
     49          

   \                                 In section .bss, align 4
     50          UINT mSccRxTimeout = 0;
   \                     mSccRxTimeout:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     51          UINT mRxPos = 0;
   \                     mRxPos:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     52          UINT mSCC_RxOkFalg = 0;
   \                     mSCC_RxOkFalg:
   \   00000000                      DS8 4
     53          
     54          /******************************************************************************
     55          	### BCC Check [TEXT~ETX] ###
     56          
     57          	Input	: *pDat->수신 데이터 / nLen->수신 데이터 길이
     58          	Output	: BCCOK->TRUE[1] / BCCNG->FALSE[0]
     59          ******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
     60          unsigned int IsBCCOK(UCHAR *pDat,UINT nLen)
     61          {
   \                     IsBCCOK:
   \   00000000   0xE92D4018         PUSH     {R3,R4,LR}
     62          	UCHAR nBCC[2];
     63          	UINT i;
     64          
     65          	nBCC[0] = nBCC[1] = 0x00;
   \   00000004   0xE3A03000         MOV      R3,#+0
   \   00000008   0xE1CD30B0         STRH     R3,[SP, #+0]
     66          
     67          	for(i=0;i<nLen;i++)
   \   0000000C   0xE3A02000         MOV      R2,#+0
   \   00000010   0xE3510000         CMP      R1,#+0
   \   00000014   0x0A000009         BEQ      ??IsBCCOK_0
   \   00000018   0xE1A03000         MOV      R3,R0
     68          	{
     69          		nBCC[(i&0x01)] ^= pDat[i];
   \                     ??IsBCCOK_1:
   \   0000001C   0xE202C001         AND      R12,R2,#0x1
   \   00000020   0xE7DCC00D         LDRB     R12,[R12, +SP]
   \   00000024   0xE4D3E001         LDRB     LR,[R3], #+1
   \   00000028   0xE02EC00C         EOR      R12,LR,R12
   \   0000002C   0xE202E001         AND      LR,R2,#0x1
   \   00000030   0xE7CEC00D         STRB     R12,[LR, +SP]
     70          	}
   \   00000034   0xE2822001         ADD      R2,R2,#+1
   \   00000038   0xE1520001         CMP      R2,R1
   \   0000003C   0x3AFFFFF6         BCC      ??IsBCCOK_1
     71          
     72          	if(nBCC[0] != pDat[nLen] || nBCC[1] != pDat[nLen+1])
   \                     ??IsBCCOK_0:
   \   00000040   0xE5DD2000         LDRB     R2,[SP, #+0]
   \   00000044   0xE7D13000         LDRB     R3,[R1, +R0]
   \   00000048   0xE1520003         CMP      R2,R3
   \   0000004C   0x1A000004         BNE      ??IsBCCOK_2
   \   00000050   0xE5DD2001         LDRB     R2,[SP, #+1]
   \   00000054   0xE0810000         ADD      R0,R1,R0
   \   00000058   0xE5D00001         LDRB     R0,[R0, #+1]
   \   0000005C   0xE1520000         CMP      R2,R0
   \   00000060   0x0A000001         BEQ      ??IsBCCOK_3
     73          	{
     74          		return FALSE;
   \                     ??IsBCCOK_2:
   \   00000064   0xE3A00000         MOV      R0,#+0
   \   00000068   0xEA000000         B        ??IsBCCOK_4
     75          	}
     76          	else
     77          	{
     78          		return TRUE;
   \                     ??IsBCCOK_3:
   \   0000006C   0xE3A00001         MOV      R0,#+1
   \                     ??IsBCCOK_4:
   \   00000070   0xE8BD4012         POP      {R1,R4,LR}
   \   00000074   0xE12FFF1E         BX       LR               ;; return
     79          	}
     80          }
     81          
     82          /******************************************************************************
     83          	### CRC Check [LENGTH~ETX] ###
     84          	*dat : 넘겨 받은 DATA
     85          	on	: 길이를 return
     86          ******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
     87          unsigned int cal_CRC16(UINT no,UCHAR *dat)
     88          {
     89          	UINT CRC = 0;
   \                     cal_CRC16:
   \   00000000   0xE3A02000         MOV      R2,#+0
     90          	UINT i;
     91          
     92          	for(i=0;i<no;i++)
   \   00000004   0xE3500000         CMP      R0,#+0
   \   00000008   0x........         LDR      R12,??DataTable3
   \   0000000C   0x0A000006         BEQ      ??cal_CRC16_0
     93          	  CRC = (CRC >> 8) ^ CRC_Table[(CRC^dat[i])&0x00ff];
   \                     ??cal_CRC16_1:
   \   00000010   0xE4D13001         LDRB     R3,[R1], #+1
   \   00000014   0xE0233002         EOR      R3,R3,R2
   \   00000018   0xE20330FF         AND      R3,R3,#0xFF
   \   0000001C   0xE79C3103         LDR      R3,[R12, +R3, LSL #+2]
   \   00000020   0xE0232422         EOR      R2,R3,R2, LSR #+8
   \   00000024   0xE2500001         SUBS     R0,R0,#+1
   \   00000028   0x1AFFFFF8         BNE      ??cal_CRC16_1
     94          
     95          	return ((~CRC) & 0x0000ffff);
   \                     ??cal_CRC16_0:
   \   0000002C   0xE1E00002         MVN      R0,R2
   \   00000030   0xE1A00800         LSL      R0,R0,#+16
   \   00000034   0xE1A00820         LSR      R0,R0,#+16
   \   00000038   0xE12FFF1E         BX       LR               ;; return
     96          }
     97          
     98          /********************************************************
     99          	SCC1의 송수신 인터럽트 루틴
    100          *********************************************************/

   \                                 In section .text, align 4, keep-with-next
    101          void SCC_ISR(UCHAR pData)
    102          {
   \                     SCC_ISR:
   \   00000000   0xE92D4038         PUSH     {R3-R5,LR}
    103            UINT sCrc = 0;
    104            UINT sData_Len = 0;
    105            
    106            if(mSccRxTimeout == 0) mRxPos = 0;	//Delay 50ms시간동안 수신되지 않으면  gRxPos=0
   \   00000004   0x........         LDR      R1,??DataTable3_1
   \   00000008   0xE5911000         LDR      R1,[R1, #+0]
   \   0000000C   0xE3510000         CMP      R1,#+0
   \   00000010   0x........         LDREQ    R1,??DataTable3_2
   \   00000014   0x03A02000         MOVEQ    R2,#+0
   \   00000018   0x05812000         STREQ    R2,[R1, #+0]
    107              mSccRxTimeout = SCC_RX_TIMEOUT_MAX; 
   \   0000001C   0x........         LDR      R1,??DataTable3_1
   \   00000020   0xE3A0200A         MOV      R2,#+10
   \   00000024   0xE5812000         STR      R2,[R1, #+0]
    108              
    109              SCC_RxBuf[mRxPos++] = WORD_L(pData);
   \   00000028   0x........         LDR      R1,??DataTable3_2
   \   0000002C   0xE5911000         LDR      R1,[R1, #+0]
   \   00000030   0x........         LDR      R2,??DataTable3_3
   \   00000034   0xE7C10002         STRB     R0,[R1, +R2]
   \   00000038   0x........         LDR      R0,??DataTable3_2
   \   0000003C   0xE5900000         LDR      R0,[R0, #+0]
   \   00000040   0xE2800001         ADD      R0,R0,#+1
   \   00000044   0x........         LDR      R1,??DataTable3_2
   \   00000048   0xE5810000         STR      R0,[R1, #+0]
    110              
    111              switch(mRxPos)
   \   0000004C   0xE5910000         LDR      R0,[R1, #+0]
   \   00000050   0xE2400001         SUB      R0,R0,#+1
   \   00000054   0xE3500007         CMP      R0,#+7
   \   00000058   0x8A000019         BHI      ??SCC_ISR_1
   \   0000005C   0xE7DF1000         LDRB     R1,[PC, R0]
   \   00000060   0xE08FF101         ADD      PC,PC,R1, LSL #+2
   \                     ??SCC_ISR_0:
   \   00000064   0x01 0x04          DC8      0x1,0x4,0x7,0x17
   \              0x07 0x17    
   \   00000068   0x17 0x17          DC8      0x17,0x17,0x12,0xA
   \              0x12 0x0A    
    112              {
    113                // 데이터 프레임 중 STX의 3바이트가 "aabbcc"인지 확인
    114                case 1:
    115                  if(SCC_RxBuf[0]!=0xaa) mRxPos = 0;
   \                     ??SCC_ISR_2:
   \   0000006C   0xE5D20000         LDRB     R0,[R2, #+0]
   \   00000070   0xE35000AA         CMP      R0,#+170
   \   00000074   0xEA00000C         B        ??SCC_ISR_3
    116                  break;
    117                case 2:
    118                  if(SCC_RxBuf[1]!=0xbb) mRxPos = 0;
   \                     ??SCC_ISR_4:
   \   00000078   0xE5D20001         LDRB     R0,[R2, #+1]
   \   0000007C   0xE35000BB         CMP      R0,#+187
   \   00000080   0xEA000009         B        ??SCC_ISR_3
    119                  break;
    120                case 3:
    121                  if(SCC_RxBuf[2]!=0xcc) mRxPos = 0;
   \                     ??SCC_ISR_5:
   \   00000084   0xE5D20002         LDRB     R0,[R2, #+2]
   \   00000088   0xE35000CC         CMP      R0,#+204
   \   0000008C   0xEA000006         B        ??SCC_ISR_3
    122                  break;
    123                // end of STX Check
    124                case 7:
    125                  if((COM_DAT_HAP(SCC_RxBuf[3],SCC_RxBuf[4],SCC_RxBuf[5],SCC_RxBuf[6])&0xffff)!=0xffff) mRxPos=0;
    126                  break;
    127                case 8:
    128                  if(!(SCC_RxBuf[7]== 0xf1||SCC_RxBuf[7]== ChackHexa())) mRxPos = 0;
   \                     ??SCC_ISR_6:
   \   00000090   0xE5D20007         LDRB     R0,[R2, #+7]
   \   00000094   0xE35000F1         CMP      R0,#+241
   \   00000098   0x0A000023         BEQ      ??SCC_ISR_7
   \   0000009C   0x........         BL       ChackHexa
   \   000000A0   0x........         LDR      R1,??DataTable3_3
   \   000000A4   0xE5D11007         LDRB     R1,[R1, #+7]
   \   000000A8   0xE1510000         CMP      R1,R0
   \                     ??SCC_ISR_3:
   \   000000AC   0x0A00001E         BEQ      ??SCC_ISR_7
   \                     ??SCC_ISR_8:
   \   000000B0   0x........         LDR      R0,??DataTable3_2
   \   000000B4   0xE3A01000         MOV      R1,#+0
   \   000000B8   0xE5801000         STR      R1,[R0, #+0]
   \   000000BC   0xE8BD4031         POP      {R0,R4,R5,LR}
   \   000000C0   0xE12FFF1E         BX       LR
    129                  break;
    130                default:
    131                  sData_Len=COM_DAT((SCC_RxBuf[3]&0xff),(SCC_RxBuf[4]&0xff));	
   \                     ??SCC_ISR_1:
   \   000000C4   0xE5D24004         LDRB     R4,[R2, #+4]
    132                  if(mRxPos >=(sData_Len+10))
   \   000000C8   0x........         LDR      R0,??DataTable3_2
   \   000000CC   0xE5900000         LDR      R0,[R0, #+0]
   \   000000D0   0xE284100A         ADD      R1,R4,#+10
   \   000000D4   0xE1500001         CMP      R0,R1
   \   000000D8   0x3A000013         BCC      ??SCC_ISR_7
    133                  {
    134                    sCrc=COM_DAT(SCC_RxBuf[(sData_Len+8)],SCC_RxBuf[(sData_Len+9)]);
   \   000000DC   0xE0840002         ADD      R0,R4,R2
   \   000000E0   0xE5D05009         LDRB     R5,[R0, #+9]
    135                    if((cal_CRC16((sData_Len+5),(UCHAR *)&SCC_RxBuf[3]))==sCrc)		// BCC 체크가 OK일때
   \   000000E4   0x........         LDR      R1,??DataTable3_4
   \   000000E8   0xE2840005         ADD      R0,R4,#+5
   \   000000EC   0x........         BL       cal_CRC16
   \   000000F0   0xE1500005         CMP      R0,R5
   \   000000F4   0x........         LDR      R0,??DataTable3_2
   \   000000F8   0xE3A01000         MOV      R1,#+0
   \   000000FC   0xE5801000         STR      R1,[R0, #+0]
   \   00000100   0x1A000009         BNE      ??SCC_ISR_7
    136                    {			
    137                      mRxPos = 0;			// 데이터 수신 위치를 초기화
    138                      memcpy(SCC_RxBuf_BackUP,SCC_RxBuf,(sData_Len+10));
                             ^
Warning[Pe223]: function "memcpy" declared implicitly
   \   00000104   0xE284200A         ADD      R2,R4,#+10
   \   00000108   0x........         LDR      R1,??DataTable3_3
   \   0000010C   0x........         LDR      R0,??DataTable3_5
   \   00000110   0x........         BL       memcpy
    139                      mSCC_RxOkFalg = TRUE;	
   \   00000114   0x........         LDR      R0,??DataTable3_6
   \   00000118   0xE3A01001         MOV      R1,#+1
   \   0000011C   0xE5801000         STR      R1,[R0, #+0]
    140                      
    141                       printf("SCC Fun OK\n\r");
   \   00000120   0x........         LDR      R0,??DataTable3_7
   \   00000124   0xE8BD4032         POP      {R1,R4,R5,LR}
   \   00000128   0x........         B        printf           ;; tailcall
    142                    }
    143                    else mRxPos = 0;
    144                  }
    145                  break;
    146              }
    147          
    148          }
   \                     ??SCC_ISR_7:
   \   0000012C   0xE8BD4031         POP      {R0,R4,R5,LR}
   \   00000130   0xE12FFF1E         BX       LR               ;; return
    149          /********************************************************
    150          	SCC1의 송수신 인터럽트 루틴
    151          *********************************************************/

   \                                 In section .text, align 4, keep-with-next
    152          UCHAR SCC_RX_OK_CHECK(void)
    153          {
    154            return mSCC_RxOkFalg;
   \                     SCC_RX_OK_CHECK:
   \   00000000   0x........         LDR      R0,??DataTable3_6
   \   00000004   0xE5900000         LDR      R0,[R0, #+0]
   \   00000008   0xE20000FF         AND      R0,R0,#0xFF
   \   0000000C   0xE12FFF1E         BX       LR               ;; return
    155          }
    156          
    157          
    158          /********************************************************
    159          	SCC_ISR_Timer 
    160          *********************************************************/

   \                                 In section .text, align 4, keep-with-next
    161          void SCC_ISR_Timer(void)
    162          {
    163            if(mSccRxTimeout) mSccRxTimeout--;
   \                     SCC_ISR_Timer:
   \   00000000   0x........         LDR      R0,??DataTable3_1
   \   00000004   0xE5900000         LDR      R0,[R0, #+0]
   \   00000008   0xE3500000         CMP      R0,#+0
   \   0000000C   0x0A000004         BEQ      ??SCC_ISR_Timer_0
   \   00000010   0x........         LDR      R0,??DataTable3_1
   \   00000014   0xE5900000         LDR      R0,[R0, #+0]
   \   00000018   0xE2400001         SUB      R0,R0,#+1
   \   0000001C   0x........         LDR      R1,??DataTable3_1
   \   00000020   0xE5810000         STR      R0,[R1, #+0]
    164            
    165          }
   \                     ??SCC_ISR_Timer_0:
   \   00000024   0xE12FFF1E         BX       LR               ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   0x........         DC32     CRC_Table

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_1:
   \   00000000   0x........         DC32     mSccRxTimeout

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_2:
   \   00000000   0x........         DC32     mRxPos

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_3:
   \   00000000   0x........         DC32     SCC_RxBuf

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_4:
   \   00000000   0x........         DC32     SCC_RxBuf+0x3

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_5:
   \   00000000   0x........         DC32     SCC_RxBuf_BackUP

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_6:
   \   00000000   0x........         DC32     mSCC_RxOkFalg

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_7:
   \   00000000   0x........         DC32     `?<Constant "SCC Fun OK\\n\\r">`

   \                                 In section .rodata, align 4
   \                     `?<Constant "SCC Fun OK\\n\\r">`:
   \   00000000   0x53 0x43          DC8 "SCC Fun OK\012\015"
   \              0x43 0x20    
   \              0x46 0x75    
   \              0x6E 0x20    
   \              0x4F 0x4B    
   \              0x0A 0x0D    
   \              0x00         
   \   0000000D   0x00 0x00          DC8 0, 0, 0
   \              0x00         
    166          
    167          
    168          
    169          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       12  IsBCCOK
       16  SCC_ISR
             16 -> ChackHexa
             16 -> cal_CRC16
             16 -> memcpy
              0 -> printf
        0  SCC_ISR_Timer
        0  SCC_RX_OK_CHECK
        0  cal_CRC16


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      16  ?<Constant "SCC Fun OK\n\r">
       4  ??DataTable3
       4  ??DataTable3_1
       4  ??DataTable3_2
       4  ??DataTable3_3
       4  ??DataTable3_4
       4  ??DataTable3_5
       4  ??DataTable3_6
       4  ??DataTable3_7
    1024  CRC_Table
     120  IsBCCOK
     308  SCC_ISR
      40  SCC_ISR_Timer
      16  SCC_RX_OK_CHECK
     500  SCC_RxBuf
       4  SCC_RxBufCnt
     500  SCC_RxBuf_BackUP
      60  cal_CRC16
       4  mRxPos
       4  mSCC_RxOkFalg
       4  mSccRxTimeout

 
 1 016 bytes in section .bss
 1 024 bytes in section .data
    16 bytes in section .rodata
   576 bytes in section .text
 
   576 bytes of CODE  memory
    16 bytes of CONST memory
 2 040 bytes of DATA  memory

Errors: none
Warnings: 1
